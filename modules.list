{
    "clean": {
        "depend": ["---clean"],
        "build": [
            "rm -rf bin obj src/ptrace-gen",
            "./src/module/Makefile clean"
        ],
        "description": "Cleans build results"
    },
    "all": {
        "depend": ["demos", "ptrace-gen", "ptrace-main", "ptrace-utils", "module", "module-userspace"],
        "build": [],
        "description": "Build everything"
    },
    "demos": {
        "depend": [],
        "build": [
            "mkdir -p bin/demos",
            "./src/demos/make"
        ],
        "description": "Build demos to test on",
        "build_if": "! ./src/demos/make -q"
    },
    "ptrace-gen": {
        "depend": [],
        "build": [
            "./src/ptrace-gen/make"
        ],
        "description": "[ptrace sandbox] Build generated code",
        "build_if": "./src/ptrace-gen-scelet/copy_myself.sh && ! ./src/ptrace-gen/make -q"
    },
    "ptrace-utils": {
        "depend": [],
        "build": [
            "mkdir -p obj/ptrace-utils",
            "./src/ptrace-utils/make"
        ],
        "description": "[ptrace sandbox] Different utilities",
        "build_if": "! ./src/ptrace-utils/make -q"
    },
    "ptrace-main": {
        "depend": ["ptrace-utils", "ptrace-gen"],
        "build": [
            "mkdir -p obj/ptrace-main bin/ptrace-main",
            "./src/ptrace-main/make"
        ],
        "description": "[ptrace sandbox] main stuff",
        "build_if": "! ./src/ptrace-main/make -q"
    },
    "module": {
        "depend": [],
        "build": [
            "mkdir -p bin/module",
            "./src/module/Makefile"
        ],
        "description": "[kernel module sandboxing] Build sandboxer.ko kernel module",
        "build_if": "! ./src/module/Makefile -q"
    },
    "module-userspace": {
        "depend": [],
        "build": [
            "mkdir -p bin/module-userspace",
            "./src/module-userspace/make"
        ],
        "description": "[Kernel module sandboxing] Build sandboxer.ko userspace staff"
    },
    "tests": {
        "depend": [],
        "build": [
            "mkdir -p bin/tests",
            "./src/tests/make",
            "./bin/tests/test_hashmap"
        ],
        "description": "Test some modules"
    }
}
